import React, { useState, useMemo, useCallback } from 'react';
import ExamplePhrase from '../../../ExamplePhrase';

// –ë–∞–∑–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∫–ª—è—Ç–≤—ã (–º—É–∂—Å–∫–æ–π —Ä–æ–¥)
const baseOathLines = [
    "say –ö–ª—è–Ω—É—Å—å –ê–ø–æ–ª–ª–æ–Ω–æ–º, –≤—Ä–∞—á–æ–º –ê—Å–∫–ª–µ–ø–∏–µ–º, –ì–∏–≥–∏–µ–µ–π –∏ –ü–∞–Ω–∞—Ü–µ–µ–π, –≤—Å–µ–º–∏ –±–æ–≥–∞–º–∏ –∏ –±–æ–≥–∏–Ω—è–º–∏,",
    "say –±–µ—Ä—è –∏—Ö –≤ —Å–≤–∏–¥–µ—Ç–µ–ª–∏, –∏—Å–ø–æ–ª–Ω—è—Ç—å —á–µ—Å—Ç–Ω–æ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º–æ–∏–º —Å–∏–ª–∞–º –∏ –º–æ–µ–º—É —Ä–∞–∑—É–º–µ–Ω–∏—é, —É–º–µ–Ω–∏—é,",
    "say —Å–ª–µ–¥—É—é—â—É—é –ø—Ä–∏—Å—è–≥—É –∏ –ø–∏—Å—å–º–µ–Ω–Ω–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ: —É—á–∏—Ç–µ–ª—è –Ω–∞—É—á–∏–≤—à–µ–≥–æ –º–µ–Ω—è –≤—Ä–∞—á–µ–±–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É",
    "say —Å—á–∏—Ç–∞—Ç—å –Ω–∞—Ä–∞–≤–Ω–µ —Å –º–æ–∏–º–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º–∏, –¥–µ–ª–∏—Ç—å—Å—è —Å –Ω–∏–º —Å–≤–æ–∏–º–∏ –¥–æ—Å—Ç–∞—Ç–∫–∞–º–∏ –∏ –≤ —Å–ª—É—á–∞–µ –Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –ø–æ–º–æ–≥–∞—Ç—å –µ–º—É",
    "say –≤ –µ–≥–æ –Ω—É–∂–¥–∞—Ö; –µ–≥–æ –ø–æ—Ç–æ–º—Å—Ç–≤–æ —Å—á–∏—Ç–∞—Ç—å —Å–≤–æ–∏–º–∏ –±—Ä–∞—Ç—å—è–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –∑–∞—Ö–æ—Ç—è—Ç –µ–≥–æ –∏–∑—É—á–∞—Ç—å, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç—å –∏–º",
    "say –±–µ–∑–≤–æ–∑–º–µ–∑–¥–Ω–æ, –∏ –±–µ–∑ –≤—Å—è–∫–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞; –Ω–∞—Å—Ç–∞–≤–ª–µ–Ω–∏—è, —É—Å—Ç–Ω—ã–µ —É—Ä–æ–∫–∏ –∏ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤ —É—á–µ–Ω–∏–∏",
    "say —Å–æ–æ–±—â–∞—Ç—å —Å–≤–æ–∏–º —Å—ã–Ω–æ–≤—å—è–º, —Å—ã–Ω–æ–≤—å—è–º —Å–≤–æ–µ–≥–æ —É—á–∏—Ç–µ–ª—è –∏ —É—á–µ–Ω–∏–∫–∞–º, —Å–≤—è–∑–∞–Ω–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º",
    "say –∏ –∫–ª—è—Ç–≤–æ–π –ø–æ –∑–∞–∫–æ–Ω—É –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º—É, –Ω–æ –Ω–∏–∫–æ–º—É –¥—Ä—É–≥–æ–º—É. –Ø –Ω–∞–ø—Ä–∞–≤–ª—è—é —Ä–µ–∂–∏–º –±–æ–ª—å–Ω—ã—Ö –∫ –∏—Ö –≤—ã–≥–æ–¥–µ –º–æ–∏–º–∏",
    "say —Å–∏–ª–∞–º–∏ –∏ –º–æ–∏–º —Ä–∞–∑—É–º–µ–Ω–∏–µ–º, –≤–æ–∑–¥–µ—Ä–∂–∏–≤–∞—è—Å—å –æ—Ç –ø—Ä–∏—á–∏–Ω–µ–Ω–∏—è –≤—Ä–µ–¥–∞ –∏ –Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏. –Ø –Ω–µ –¥–∞–º –Ω–∏–∫–∞–∫–æ–º—É",
    "say –ø—Ä–æ—Å–∏–º–æ–º—É —É –º–µ–Ω—è —Å–º–µ—Ä—Ç–µ–ª—å–Ω–æ–≥–æ —Å—Ä–µ–¥—Å—Ç–≤–∞ –∏ –Ω–µ –ø–æ–∫–∞–∂—É –ø—É—Ç–∏ –¥–ª—è –ø–æ–¥–æ–±–Ω–æ–≥–æ –∑–∞–º—ã—Å–ª–∞; —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ",
    "say —è –Ω–µ –≤—Ä—É—á—É –Ω–∏–∫–∞–∫–æ–π –∂–µ–Ω—â–∏–Ω–µ –∞–±–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –ø–µ—Å—Å–∞—Ä–∏—è. –Ø –Ω–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ –Ω–µ –±—É–¥—É –¥–µ–ª–∞—Ç—å —Å–µ—á–µ–Ω–∏—è —É",
    "say —Å—Ç—Ä–∞–¥–∞—é—â–∏—Ö –∫–∞–º–µ–Ω–Ω–æ–π –±–æ–ª–µ–∑–Ω—å—é, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–≤ —ç—Ç–æ –ª—é–¥—è–º, –∑–∞–Ω–∏–º–∞—é—â–∏–º—Å—è —ç—Ç–∏–º –¥–µ–ª–æ–º.",
    "say –í –∫–∞–∫–æ–π –±—ã –¥–æ–º —è –Ω–∏ –≤–æ—à–µ–ª, —è –≤–æ–π–¥—É —Ç—É–¥–∞ –¥–ª—è –ø–æ–ª—å–∑—ã –±–æ–ª—å–Ω–æ–≥–æ, –Ω–µ–ø—Ä–∞–≤–µ–¥–Ω–æ–≥–æ –∏ –ø–∞–≥—É–±–Ω–æ–≥–æ,",
    "say –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Ç –ª—é–±–æ–≤–Ω—ã—Ö –¥–µ–ª —Å –∂–µ–Ω—â–∏–Ω–∞–º–∏ –∏ –º—É–∂—á–∏–Ω–∞–º–∏, —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –∏ —Ä–∞–±–∞–º–∏.",
    "say –í—Å–µ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –º–Ω–µ —Ç–∞–π–Ω—ã - –±—É–¥—É—Ç —Å–µ–∫—Ä–µ—Ç–æ–º –¥–æ –∫–æ–Ω—Ü–∞ –º–æ–µ–π –∂–∏–∑–Ω–∏. –ú–Ω–µ, —á–µ–ª–æ–≤–µ–∫—É –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É –∫–ª—è—Ç–≤—É,",
    "say –¥–∞ –±—É–¥–µ—Ç –¥–∞–Ω–æ —Å—á–∞—Å—Ç—å–µ –≤ –∂–∏–∑–Ω–∏ –∏ —Å–ª–∞–≤–∞ —É –≤—Å–µ—Ö –ª—é–¥–µ–π –Ω–∞ –≤–µ—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞, –ø—Ä–µ—Å—Ç—É–ø–∞—é—â–µ–º—É –∂–µ",
    "say –∏ –¥–∞—é—â–µ–º—É –ª–æ–∂–Ω—É—é –∫–ª—è—Ç–≤—É –¥–∞ –±—É–¥–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ–µ —ç—Ç–æ–º—É."
];

interface HippocraticOathProps {
    gender: 'male' | 'female';
}

const HippocraticOath: React.FC<HippocraticOathProps> = ({ gender }) => {
    const [showCopyNotification, setShowCopyNotification] = useState(false);

    // –§—É–Ω–∫—Ü–∏—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ –ø–æ–¥ –ø–æ–ª
    const adaptTextForGender = useCallback((text: string): string => {
        if (gender === 'female') {
            return text
                .replace(/–Ω–∞—É—á–∏–≤—à–µ–≥–æ/g, '–Ω–∞—É—á–∏–≤—à—É—é')
                .replace(/—É—á–∏—Ç–µ–ª—è/g, '—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü—É')
                .replace(/–µ–≥–æ –ø–æ—Ç–æ–º—Å—Ç–≤–æ/g, '–µ—ë –ø–æ—Ç–æ–º—Å—Ç–≤–æ')
                .replace(/—Å–≤–æ–∏–º–∏ –±—Ä–∞—Ç—å—è–º–∏/g, '—Å–≤–æ–∏–º–∏ —Å—ë—Å—Ç—Ä–∞–º–∏')
                .replace(/—Å—ã–Ω–æ–≤—å—è–º —Å–≤–æ–µ–≥–æ —É—á–∏—Ç–µ–ª—è/g, '–¥–æ—á–µ—Ä—è–º —Å–≤–æ–µ–π —É—á–∏—Ç–µ–ª—å–Ω–∏—Ü—ã')
                .replace(/—Å–≤–æ–∏–º —Å—ã–Ω–æ–≤—å—è–º/g, '—Å–≤–æ–∏–º –¥–æ—á–µ—Ä—è–º')
                .replace(/–≤–æ—à–µ–ª/g, '–≤–æ—à–ª–∞')
                .replace(/–≤–æ–π–¥—É/g, '–≤–æ–π–¥—É')
                .replace(/—á–µ–ª–æ–≤–µ–∫—É –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É/g, '—á–µ–ª–æ–≤–µ–∫—É –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É')
                .replace(/–ø—Ä–µ—Å—Ç—É–ø–∞—é—â–µ–º—É/g, '–ø—Ä–µ—Å—Ç—É–ø–∞—é—â–µ–π');
        }
        return text;
    }, [gender]);

    // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ–ª–∞)
    const oathLines = useMemo(() => 
        baseOathLines.map(line => adaptTextForGender(line)),
        [adaptTextForGender]
    );

    const handleCopyAll = () => {
        const fullText = oathLines.join('\n');
        navigator.clipboard.writeText(fullText);
        setShowCopyNotification(true);
        setTimeout(() => setShowCopyNotification(false), 2000);
    };

    return (
        <>
            <div className="subsection">
                <div className="bg-gradient-to-r from-slate-800/60 to-slate-900/60 p-6 rounded-lg border-2 border-slate-700/50 mb-6">
                    <h3 className="text-xl font-bold text-red-300 mb-3 flex items-center gap-2">
                        <span>‚öïÔ∏è</span>
                        –ö–ª—è—Ç–≤–∞ –ì–∏–ø–ø–æ–∫—Ä–∞—Ç–∞
                    </h3>
                    <p className="text-slate-300 text-sm mb-4">
                        –î—Ä–µ–≤–Ω–µ–π—à–∞—è –∫–ª—è—Ç–≤–∞ –≤—Ä–∞—á–µ–π, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è —ç—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
                    </p>
                    
                    <div className="note mb-4">
                        <strong>üìå –í–∞–∂–Ω–æ:</strong> –ò–Ω—Ç–µ—Ä–Ω –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –∫–ª—è—Ç–≤—É –Ω–∞–∏–∑—É—Å—Ç—å –∏–ª–∏ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –µ—ë –ø—Ä–æ—á–∏—Ç–∞—Ç—å. 
                        –¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–ª.
                    </div>

                    <div className="bg-slate-800/40 rounded-lg p-3 mb-4 border border-slate-700/30">
                        <p className="text-sm text-slate-300">
                            <strong className="text-red-300">–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º:</strong> {gender === 'male' ? 'üë® –ú—É–∂—Å–∫–æ–π' : 'üë© –ñ–µ–Ω—Å–∫–∏–π'}
                        </p>
                    </div>

                    <button
                        onClick={handleCopyAll}
                        className="w-full bg-gradient-to-r from-red-900/60 to-red-800/60 hover:from-red-900/80 hover:to-red-800/80 text-white font-medium py-3 px-4 rounded-lg transition-all border border-red-700/50 flex items-center justify-center gap-2 mb-4"
                    >
                        <span>üìã</span>
                        –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –∫–ª—è—Ç–≤—É
                    </button>
                </div>

                {/* –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ */}
                {showCopyNotification && (
                    <div className="fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in">
                        ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!
                    </div>
                )}

                {/* –¢–µ–∫—Å—Ç –∫–ª—è—Ç–≤—ã –ø–æ—Å—Ç—Ä–æ—á–Ω–æ */}
                <div className="space-y-3">
                    <h4 className="text-lg font-semibold text-red-300 mb-4">üìù –¢–µ–∫—Å—Ç –∫–ª—è—Ç–≤—ã –ø–æ —Å—Ç—Ä–æ–∫–∞–º:</h4>
                    {oathLines.map((line, index) => (
                        <ExamplePhrase 
                            key={`oath-${index}-${gender}`}
                            text={line}
                            type="ms"
                            messageType="single"
                        />
                    ))}
                </div>

                {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}
                <div className="mt-6 bg-slate-900/50 rounded-lg border border-slate-700/50 p-5">
                    <h4 className="font-semibold text-red-300 mb-3">üí° –°–æ–≤–µ—Ç—ã –ø–æ —Å–¥–∞—á–µ —ç–∫–∑–∞–º–µ–Ω–∞:</h4>
                    <ul className="space-y-2 text-sm text-slate-300">
                        <li className="flex items-start gap-2">
                            <span className="text-red-400 mt-0.5">‚Ä¢</span>
                            <span>–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤–æ –≤—Ä–µ–º—è —ç–∫–∑–∞–º–µ–Ω–∞</span>
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-red-400 mt-0.5">‚Ä¢</span>
                            <span>–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –±—ã—Å—Ç—Ä–æ–º –≤–≤–æ–¥–µ</span>
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-red-400 mt-0.5">‚Ä¢</span>
                            <span>–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã &quot;say&quot;</span>
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-red-400 mt-0.5">‚Ä¢</span>
                            <span>–î–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–æ –∏ –ø–æ—Å–ª–µ —Å–¥–∞—á–∏ –∫–ª—è—Ç–≤—ã (/timestamp + F12)</span>
                        </li>
                        <li className="flex items-start gap-2">
                            <span className="text-red-400 mt-0.5">‚Ä¢</span>
                            <span>–¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø–æ–ª–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</span>
                        </li>
                    </ul>
                </div>
            </div>

            <style jsx>{`
                @keyframes fade-in {
                    from {
                        opacity: 0;
                        transform: translateY(-10px);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-fade-in {
                    animation: fade-in 0.3s ease-out;
                }
                .note {
                    background-color: #333;
                    padding: 10px;
                    border-radius: 5px;
                }
                .note strong {
                    color: #fff;
                }
            `}</style>
        </>
    );
};

export default HippocraticOath;